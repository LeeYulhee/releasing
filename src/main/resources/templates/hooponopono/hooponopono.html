<html layout:decorate="~{common/layout.html}">

<head>
    <title>Holistic Releasing</title>

    <style>

        .answer {
            background-color: #18181b !important;
            border: none !important;
            color: white !important;
        }

        .answer:hover {
            background-color: black !important;
        }

        input:focus {
            outline: none !important;
        }

        .start:hover {
            background-color: #7f8080 !important;
        }
    </style>
</head>

<body onload="initOrContinue()">

    <main layout:fragment="main" class="flex-grow flex items-center justify-center">

        <button id="hoopoWord" class="btn w-1/3 answer" onclick="next()">
        </button>

        <div class="flex justify-center text-lg">
            <p>카운트 : &nbsp</p>
            <p id="hoopoCount">0</p>
        </div>

        <div>
            <a href="javascript:void(0);" onclick="start()">초기화</a>
        </div>

        <script>

            function initOrContinue() {
                fetch(`/hooponopono/init`, {
                    method: 'GET'
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('hoopoWord').textContent = data.hoopoWord;
                    document.getElementById('hoopoCount').textContent = data.hoopoCount;
                })
                .catch(error => console.error('Error:', error));
            }

            function start() {
                fetch(`/hooponopono/start`, {
                    method: 'GET'
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('hoopoWord').textContent = data.hoopoWord;
                    document.getElementById('hoopoCount').textContent = data.hoopoCount;
                })
                .catch(error => console.error('Error:', error));
            }

            function next() {
                fetch('/hooponopono/next', {
                    method: 'GET'
                })
                .then(response => response.json())
                .then(data => {
                    // 질문과 count를 업데이트
                    document.getElementById('hoopoWord').textContent = data.hoopoWord;
                    document.getElementById('hoopoCount').textContent = data.hoopoCount;
                })
                .catch(error => console.error('Error:', error));
            }


        </script>

    </main>

</body>

</html>