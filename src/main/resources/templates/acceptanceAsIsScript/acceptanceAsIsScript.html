<html layout:decorate="~{common/layout.html}">

<head>
    <title>MASURINðŸ”® | Holistic Releasing</title>

    <style>

        .answer {
            background-color: #18181b !important;
            border: none !important;
            color: white !important;
        }

        .answer:hover {
            background-color: black !important;
        }

        input:focus {
            outline: none !important;
        }

        .start:hover {
            background-color: #7f8080 !important;
        }

        #acceptScriptString {
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-all;
        }
    </style>
</head>

<body>

<main class="flex-grow flex items-center justify-center" layout:fragment="main">

    <div class="flex-grow flex items-center justify-center" id="app">
        <div class="max-w-2xl w-full px-4">
            <div class="flex flex-col gap-6">

                <p class="text-center text-2xl mt-10 mb-10" id="acceptScriptString"></p>

                <div class="flex justify-center gap-8">
                    <button class="btn w-2/5 answer btn-lg" onclick="next()">
                        <span>ë„¤</span>
                    </button>
                    <button class="btn w-2/5 answer btn-lg" onclick="next()">
                        <span>ì•„ë‹ˆì˜¤</span>
                    </button>
                </div>

                <div class="flex justify-center text-lg">
                    <p>ì¹´ìš´íŠ¸ : &nbsp</p>
                    <p id="acceptScriptCount">0</p>
                </div>

            </div>
        </div>
    </div>

    <script>
        function start() {
            fetch(`/accept/start`, {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('acceptScriptString').textContent = data.acceptScriptString;
                    document.getElementById('acceptScriptCount').textContent = data.acceptScriptCount; // ì´ˆê¸° holisticCount ê°’ë„ ì„¤ì •
                })
                .catch(error => console.error('Error:', error));
        }

        function next() {
            fetch('/accept/next', {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    // ì§ˆë¬¸ê³¼ holisticCountë¥¼ ì—…ë°ì´íŠ¸
                    document.getElementById('acceptScriptString').textContent = data.acceptScriptString;
                    document.getElementById('acceptScriptCount').textContent = data.acceptScriptCount; // resist ëª¨ë“œì—ì„œë§Œ ì¦ê°€ëœ holisticCount ê°’ì„ ë°›ì•„ì˜´
                })
                .catch(error => console.error('Error:', error));
        }

        // íŽ˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
        window.onload = function () {
            fetch('/accept/init', {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    if (data.acceptScriptString) {
                        document.getElementById('acceptScriptString').textContent = data.acceptScriptString;
                    }
                    if (data.acceptScriptCount) {
                        document.getElementById('acceptScriptCount').textContent = data.acceptScriptCount;
                    }
                    // í•„ìš”í•œ ë‹¤ë¥¸ ë¡œì§ ì¶”ê°€
                })
                .catch(error => console.error('Error:', error));
        };
    </script>
</main>

</body>

</html>
